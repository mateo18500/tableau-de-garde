<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mise à jour en cours…</title>
  <meta name="description" content="Écran d'attente animé - Mise à jour en cours" />
  <style>
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial; color: #0f172a; }

    .bg {
      position: fixed; inset: 0; z-index: -1;
      background: radial-gradient(1200px 700px at 20% 20%, #e0f2fe 0%, transparent 60%),
                  radial-gradient(900px 600px at 80% 30%, #e9d5ff 0%, transparent 60%),
                  radial-gradient(1000px 800px at 50% 80%, #dcfce7 0%, transparent 60%),
                  linear-gradient(135deg, #f8fafc, #eef2ff);
      filter: saturate(110%);
      animation: pan 16s linear infinite alternate;
    }
    @keyframes pan { to { transform: translate3d(2%, -2%, 0); } }

    .wrap {
      min-height: 100%;
      display: grid; place-items: center; padding: 24px;
    }
    .card {
      width: 100%; max-width: 680px;
      background: rgba(255,255,255,0.75);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(15,23,42,0.08);
      border-radius: 24px;
      box-shadow: 0 10px 30px rgba(15,23,42,0.1);
      padding: clamp(20px, 4vw, 36px);
      text-align: center;
    }

    .gear {
      width: 72px; height: 72px; margin: 8px auto 20px;
      animation: spin 4.5s linear infinite;
      filter: drop-shadow(0 6px 12px rgba(0,0,0,0.08));
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    h1 {
      margin: 0 0 10px; font-weight: 800; letter-spacing: -0.02em;
      font-size: clamp(1.6rem, 2.2vw + 1rem, 2.4rem);
      line-height: 1.15;
      background: linear-gradient(90deg, #0f172a, #334155 35%, #0f172a 70%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
      background-size: 200% 100%;
      animation: shimmer 3.2s ease-in-out infinite;
    }
    @keyframes shimmer { 0% { background-position: 0% 50%; } 50%{ background-position: 100% 50%; } 100%{ background-position: 0% 50%; } }

    .sub { color: #334155; margin-bottom: 20px; font-size: clamp(0.95rem, 0.5vw + 0.8rem, 1.05rem); }

    .barWrap {
      --h: 14px;
      height: var(--h); width: 100%; background: #e2e8f0; border-radius: 999px;
      overflow: hidden; position: relative; border: 1px solid rgba(51,65,85,0.15);
    }
    .bar {
      position: absolute; inset: 0 auto 0 0; width: 0%;
      background: linear-gradient(90deg, #22c55e, #06b6d4 60%, #8b5cf6);
      background-size: 200% 100%;
      animation:
        load 3.2s ease-in-out infinite,
        sheen 1.6s linear infinite;
    }
    @keyframes load { 0%{ width: 0%; } 70%{ width: 90%; } 100%{ width: 100%; } }
    @keyframes sheen { from { background-position: 0% 50%; } to { background-position: 100% 50%; } }

    .dots { display: inline-flex; gap: 6px; vertical-align: middle; margin-left: 2px; }
    .dot { width: 6px; height: 6px; border-radius: 50%; background: #334155; opacity: 0.25; animation: blink 1.4s infinite; }
    .dot:nth-child(2) { animation-delay: .2s; }
    .dot:nth-child(3) { animation-delay: .4s; }
    @keyframes blink { 0%, 60%, 100% { opacity: 0.2 } 30% { opacity: 1 } }

    .small { margin-top: 14px; font-size: 0.85rem; color: #475569; }

    footer {
      margin-top: 25px;
      font-size: 0.9rem;
      color: #334155;
      text-align: center;
      opacity: 0.7;
    }

    @media (prefers-reduced-motion: reduce) {
      .bg, .gear, h1, .bar, .dot { animation: none !important; }
    }
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>

  <main class="wrap" role="main">
    <section class="card" aria-live="polite" aria-busy="true">
      <svg class="gear" viewBox="0 0 24 24" aria-hidden="true">
        <path fill="#0ea5e9" d="M12 8.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm9.29 2.7-1.8-.3a7.47 7.47 0 0 0-.73-1.76l1.04-1.47a.9.9 0 0 0-.12-1.15l-1.2-1.2a.9.9 0 0 0-1.15-.12l-1.47 1.04c-.56-.32-1.14-.57-1.76-.73l-.3-1.8A.9.9 0 0 0 12.9 2h-1.8a.9.9 0 0 0-.88.75l-.3 1.8c-.62.16-1.2.41-1.76.73L6.7 4.24a.9.9 0 0 0-1.15.12L4.34 5.56a.9.9 0 0 0-.12 1.15l1.04 1.47c-.32.56-.57 1.14-.73 1.76l-1.8.3A.9.9 0 0 0 2 11.1v1.8c0 .44.31.82.75.88l1.8.3c.16.62.41 1.2.73 1.76L4.24 17.3a.9.9 0 0 0 .12 1.15l1.2 1.2c.29.29.75.35 1.1.12l1.47-1.04c.56.32 1.14.57 1.76.73l.3 1.8c.06.44.44.75.88.75h1.8c.44 0 .82-.31.88-.75l.3-1.8c.62-.16 1.2-.41 1.76-.73l1.47 1.04c.35.23.81.17 1.1-.12l1.2-1.2c.29-.29.35-.75.12-1.1l-1.04-1.47c.32-.56.57-1.14.73-1.76l1.8-.3c.44-.06.75-.44.75-.88v-1.8a.9.9 0 0 0-.75-.88Z"/>
      </svg>

      <h1>Mise à jour en cours<span class="dots" aria-hidden="true"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span></h1>
      <p class="sub">Merci de patienter pendant que nous appliquons les dernières améliorations.</p>

      <div class="barWrap" role="progressbar" aria-busy="true" aria-valuemin="0" aria-valuemax="100" aria-label="Progression de la mise à jour">
        <div class="bar"></div>
      </div>

      <p class="small" id="hint">Cette page se refermera automatiquement une fois la mise à jour terminée.</p>

      <footer>© Matéo CALLEJA</footer>
    </section>
  </main>

  <script>
    (function simulateAutoClose(){
      const MAX_CYCLES = 3;
      let cycles = 0;
      const bar = document.querySelector('.bar');
      const hint = document.getElementById('hint');

      bar.addEventListener('animationiteration', (e) => {
        if (e.animationName === 'load') {
          cycles++;
          if (cycles >= MAX_CYCLES) {
            hint.textContent = 'Mise à jour terminée. Redirection…';
            document.body.classList.add('done');
            setTimeout(() => {
              cycles = 0;
              hint.textContent = 'Cette page se refermera automatiquement une fois la mise à jour terminée.';
            }, 1600);
          }
        }
      });
    })();
  </script>
</body>
</html>
